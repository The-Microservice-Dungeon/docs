<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/docs/blog/rss.xml" title="The Microservice Dungeon Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs/blog/atom.xml" title="The Microservice Dungeon Blog Atom Feed"><title data-react-helmet="true">Trading Service Technical View | The Microservice Dungeon</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://The-Microservice-Dungeon.github.io/docs/rules/tradingService"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Trading Service Technical View | The Microservice Dungeon"><meta data-react-helmet="true" name="description" content="Price Econonmy"><meta data-react-helmet="true" property="og:description" content="Price Econonmy"><link data-react-helmet="true" rel="shortcut icon" href="/docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://The-Microservice-Dungeon.github.io/docs/rules/tradingService"><link data-react-helmet="true" rel="alternate" href="https://The-Microservice-Dungeon.github.io/docs/rules/tradingService" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://The-Microservice-Dungeon.github.io/docs/rules/tradingService" hreflang="x-default"><link rel="stylesheet" href="/docs/assets/css/styles.d4a142dc.css">
<link rel="preload" href="/docs/assets/js/runtime~main.3faae8b0.js" as="script">
<link rel="preload" href="/docs/assets/js/main.345ffa81.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><img src="/docs/img/logo.png" alt="Spaceship" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/docs/img/logo.png" alt="Spaceship" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">The Microservice Dungeon</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Project</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/quickstart_entry">Quickstart Guide</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/dungeon">Gameplay/Map</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/game_entry">Game Service</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/trading_entry">Trading Service</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">Map</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/openapi/map">Map OpenAPI</a></li><li><a class="dropdown__link" href="/docs/asyncapi/map">Map AsyncAPI</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">Robot</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/openapi/robot">Robot OpenAPI</a></li><li><a class="dropdown__link" href="/docs/asyncapi/robot">Robot AsyncAPI</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">Trading</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/openapi/trading">Trading OpenAPI</a></li><li><a class="dropdown__link" href="/docs/asyncapi/trading">Trading AsyncAPI</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">Gamelog</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/openapi/gamelog">Gamelog OpenAPI</a></li><li><a class="dropdown__link" href="/docs/asyncapi/gamelog">Gamelog AsyncAPI</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">Game</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/openapi/game">Game OpenAPI</a></li><li><a class="dropdown__link" href="/docs/asyncapi/game">Game AsyncAPI</a></li></ul></div><a class="navbar__item navbar__link" href="/docs/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/The-Microservice-Dungeon" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/intro">The Microservice Dungeon</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/quickstart_entry">Quickstart Guide Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Quickstart Guide</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/dungeon">Gameworld and Gameplay Guide</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Game Rules</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rules/architecture">Architecture Overview</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rules/dungeon">Gameworld and Gameplay Guide</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rules/robot">Robot Service Technical View</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/rules/tradingService">Trading Service Technical View</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rules/game">Game Service Technical View</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rules/gameLog">Gamelog Service Technical View</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rules/map">Map Service Technical View</a></li></ul></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/game_entry">Game Service Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Game Service</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/trading_entry">Trading Service Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Trading Service</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/robot">robot</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/map">map</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/gameLog">gameLog</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Trading Service Technical View</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="price-econonmy"></a>Price Econonmy<a class="hash-link" href="#price-econonmy" title="Direct link to heading">#</a></h2><p>The special items and the resources in the game will have a simulated economy. This means that the prices will be adjusted according to a different parameters.</p><p>Every item and resource has an own economy entity. An economy constists of a <code>buy/sell-history</code> and a <code>stock/demand</code>. The item-stock will not influence the amount of items that can be bought. Same for the <code>resource-demand</code>. It will not influence how many resources can be selled. They are only a virtual parameter to simulate the <strong>price adjustments</strong>. Additionally there is another parameter that determines a time range, over which the history should be analyzed.</p><p>This economy basically implements a very easy form of price adjustments:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">more items are bought =&gt; less stock =&gt; price high</span></span><span class="token-line" style="color:#393A34"><span class="token plain">less items are bought =&gt; more stock =&gt; price low</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">more resources are selled =&gt; less demand =&gt; price low</span></span><span class="token-line" style="color:#393A34"><span class="token plain">less resources are selled =&gt; more demand =&gt; price high</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>These economies will calculate new prices after every command-execution. The prices will then be published through their corresponding events.</p><p>All prices will always be <code>Integers</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="resources"></a>Resources<a class="hash-link" href="#resources" title="Direct link to heading">#</a></h2><table><thead><tr><th>Value</th><th>Name</th><th>Price</th></tr></thead><tbody><tr><td>COAL</td><td>Coal</td><td>5</td></tr><tr><td>IRON</td><td>Iron</td><td>15</td></tr><tr><td>GEM</td><td>Gem</td><td>30</td></tr><tr><td>GOLD</td><td>Gold</td><td>50</td></tr><tr><td>PLATIN</td><td>Platin</td><td>60</td></tr></tbody></table><ul><li>(<a href="https://github.com/The-Microservice-Dungeon/trading/blob/main/src/main/resources/resources.json" target="_blank" rel="noopener noreferrer">https://github.com/The-Microservice-Dungeon/trading/blob/main/src/main/resources/resources.json</a>)</li><li>(<a href="https://github.com/The-Microservice-Dungeon/trading/blob/main/src/main/java/dungeon/trading/resource/ResourceRestController.java" target="_blank" rel="noopener noreferrer">https://github.com/The-Microservice-Dungeon/trading/blob/main/src/main/java/dungeon/trading/resource/ResourceRestController.java</a>)</li></ul><p>Resources are calculated with only the sell-history factor:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">newPrice = ceil(originalPrice * historyFactor)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This factor is calculated as follows (if the factor is greater than or equals 1, the factor will be 1 and the price will stay the same):</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">historyFactor = resourceDemand / soldAmountInTimeRange</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="example-1"></a>Example 1<a class="hash-link" href="#example-1" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">demand = 10; sold = 15</span></span><span class="token-line" style="color:#393A34"><span class="token plain">factor = 10 / 15 = 0,66</span></span><span class="token-line" style="color:#393A34"><span class="token plain">factor &lt;= 1</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>=&gt; price will be changed by a factor of 0,66</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="example-2"></a>Example 2<a class="hash-link" href="#example-2" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">demand = 10; sold = 3</span></span><span class="token-line" style="color:#393A34"><span class="token plain">factor = 10 / 3 = 3,33</span></span><span class="token-line" style="color:#393A34"><span class="token plain">factor &gt; 1</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>=&gt; price will stay the same</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="items"></a>Items<a class="hash-link" href="#items" title="Direct link to heading">#</a></h2><p>Resources are calculated with the buy-history factor and an additional round-adjust factor:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">newPrice = ceil(originalPrice * historyFactor * roundAdjust)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The buy-history factor is calculated as follows (if the factor is smaller than or equals 1, the factor will be 1 and the price will stay the same):</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">historyFactor = boughtAmountInTimeRange / itemStock</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Example 1:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">stock = 5; bought = 3</span></span><span class="token-line" style="color:#393A34"><span class="token plain">factor = 3 / 5 = 0,6</span></span><span class="token-line" style="color:#393A34"><span class="token plain">factor &lt;= 1</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>=&gt; price will stay the same</p><p>Example 2:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">stock = 2; bought = 3</span></span><span class="token-line" style="color:#393A34"><span class="token plain">factor = 3 / 2 = 1,5</span></span><span class="token-line" style="color:#393A34"><span class="token plain">factor &gt; 1</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>=&gt; price will be changed by a factor of 1,5</p><p>As mentioned before, the items get an additional factor for an adjustment according to the current length of the game. This is to ensure that items will not be spammed everwhere due to their &quot;cheapness&quot; in the endgame.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">roundAdjust = floor(200 * (1 / (1 + e^(-0,014 * currentRound) * 199)))</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>(<a href="https://github.com/The-Microservice-Dungeon/trading/blob/main/src/main/java/dungeon/trading/item/Item.java" target="_blank" rel="noopener noreferrer">https://github.com/The-Microservice-Dungeon/trading/blob/main/src/main/java/dungeon/trading/item/Item.java</a>)</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="lifecycle"></a>Lifecycle<a class="hash-link" href="#lifecycle" title="Direct link to heading">#</a></h2><p>The processes of the Trading Service are always based on a user command. This is sent by the player to the game service and from there to the trading service. The Trading Service controls the money-relevant information. The service also checks whether the request was made from a valid position (space station, spawn). Then, in the case of robot-relevant trades, a single request is sent to the robot service to check whether it meets all the necessary requirements for the trade. If this is the case, the trading service receives a positive response to its request to the robot service, withdraws the money and throws an event with the transactionId associated with the trade, so that the player knows what happened with the trade. In the event of a transaction failure, an event is also thrown to inform the player of the error.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="trading-places"></a>Trading Places<a class="hash-link" href="#trading-places" title="Direct link to heading">#</a></h2><ul><li>PLAYER can buy SPECIAL ITEM and UPGRADES with a ROBOT at SPACESTATION</li><li>PLAYER can buy ROBOTS EVERYWHERE which spawns at a random SPACESTATION</li><li>RESOURCE can be sold at any SPACESTATION</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="special-items"></a>Special Items<a class="hash-link" href="#special-items" title="Direct link to heading">#</a></h2><table><thead><tr><th>Value</th><th>Name</th><th>Beschreibung</th><th>Price</th></tr></thead><tbody><tr><td>ROBOT</td><td>Robot</td><td>Buys another Robot</td><td>100</td></tr><tr><td>HEALTH</td><td>Health Regeneration</td><td>Heals the robot to full HP</td><td>50</td></tr><tr><td>ENERGY</td><td>Energy Regeneration</td><td>Restores all energy</td><td>75</td></tr><tr><td>ROCKET</td><td>Rocket Item</td><td>5 Damage on a single target</td><td>40</td></tr><tr><td>WORMHOLE</td><td>Wormhole Item</td><td>Teleport to random planet</td><td>80</td></tr><tr><td>LONG_RANGE_BOMBARDMENT</td><td>Long range Bombardment Item</td><td>10 Damage to all robots on a specific planet</td><td>60</td></tr><tr><td>SELF_DESTRUCTION</td><td>Self Destruction Item</td><td>Self destruct a robot and damage all robots on the planet by 20</td><td>80</td></tr><tr><td>REPAIR_SWARM</td><td>Repair Swarm Item</td><td>Heal all of your robots on the planet by 20</td><td>90</td></tr><tr><td>NUKE</td><td>Nuke Item</td><td>100 damage on all robots on a specific planet</td><td>210</td></tr></tbody></table><p>(<a href="https://github.com/The-Microservice-Dungeon/trading/blob/main/src/main/resources/items.json" target="_blank" rel="noopener noreferrer">https://github.com/The-Microservice-Dungeon/trading/blob/main/src/main/resources/items.json</a>)</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="upgrades"></a>Upgrades<a class="hash-link" href="#upgrades" title="Direct link to heading">#</a></h2><p>Count: 1 per robot per round</p><p>Restrictions: Only next upgrade level (1-5)</p><p>Reason: Upgrading a robot is seen as an action. The overall game is designed for only a single action per round. You can only buy the next higher upgrade level for each category. E.g. a robot with MINING_2 can only buy MINING_3. Any other upgrade to MINING will result in an error. This design takes into account the loose coupling of the trading service and avoids saving robot informations.</p><table><thead><tr><th>Value</th><th>Beschreibung</th></tr></thead><tbody><tr><td>STORAGE_N</td><td>Storage Level N=1-5 Upgrade</td></tr><tr><td>HEALTH_N</td><td>Health Points Level N=1-5 Upgrade</td></tr><tr><td>DAMAGE_N</td><td>Damage Points Level N=1-5 Upgrade</td></tr><tr><td>MINING_SPEED_N</td><td>Mining Speed Level N=1-5 Upgrade</td></tr><tr><td>MINING_N</td><td>Mining Strength Level N=1-5 Upgrade</td></tr><tr><td>MAX_ENERGY_N</td><td>Energy Capacity Level N=1-5 Upgrade</td></tr><tr><td>ENERGY_REGEN_N</td><td>Energy Regen Level N=1-5 Upgrade</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="prices"></a>Prices<a class="hash-link" href="#prices" title="Direct link to heading">#</a></h3><table><thead><tr><th>Level</th><th>Price</th></tr></thead><tbody><tr><td>1</td><td>50</td></tr><tr><td>2</td><td>300</td></tr><tr><td>3</td><td>1500</td></tr><tr><td>4</td><td>4000</td></tr><tr><td>5</td><td>15000</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="trading-semantics"></a>Trading Semantics<a class="hash-link" href="#trading-semantics" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="commands"></a>Commands<a class="hash-link" href="#commands" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;gameId&quot;: &quot;d290f1ee-6c54-4b01-90e6-d701748f0851&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;playerToken&quot;: &quot;d290f1ee-6c54-4b01-90e6-d701748f0851&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;robotId&quot;: &quot;d290f1ee-6c54-4b01-90e6-d701748f0851&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;commandType&quot;: &quot;blocking&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;commandObject&quot;: </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;commandType&quot;: &quot;blocking&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;planetId&quot;: &quot;d290f1ee-6c54-4b01-90e6-d701748f0851&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;targetId&quot;: &quot;d290f1ee-6c54-4b01-90e6-d701748f0851&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;itemName&quot;: &quot;string&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;itemQuantity&quot;: 5</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>(<a href="https://github.com/The-Microservice-Dungeon/game/blob/main/src/main/kotlin/microservice/dungeon/game/aggregates/command/controller/CommandController.kt" target="_blank" rel="noopener noreferrer">https://github.com/The-Microservice-Dungeon/game/blob/main/src/main/kotlin/microservice/dungeon/game/aggregates/command/controller/CommandController.kt</a>)</li><li>(<a href="https://github.com/The-Microservice-Dungeon/game/blob/main/src/main/kotlin/microservice/dungeon/game/aggregates/command/domain/Command.kt" target="_blank" rel="noopener noreferrer">https://github.com/The-Microservice-Dungeon/game/blob/main/src/main/kotlin/microservice/dungeon/game/aggregates/command/domain/Command.kt</a>)</li><li>(<a href="https://github.com/The-Microservice-Dungeon/game/blob/main/src/main/kotlin/microservice/dungeon/game/aggregates/command/domain/CommandPayload.kt" target="_blank" rel="noopener noreferrer">https://github.com/The-Microservice-Dungeon/game/blob/main/src/main/kotlin/microservice/dungeon/game/aggregates/command/domain/CommandPayload.kt</a>)</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="special-items-1"></a>Special Items<a class="hash-link" href="#special-items-1" title="Direct link to heading">#</a></h2><p>Count: 1 per robot per round.</p><p>Reason: To prevent price manipulation through a single robot.
Robots</p><p>Count: Multiple robots per round.</p><p>Reason: Buying a robot should not be bound to an existing robot. You can buy as many robots as you have money.
Regeneration</p><p>Count: 1 per robot per round</p><p>Reason: You get max health/energy with one purchase. So you do not need to buy multiple.
Upgrades</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="player-and-money"></a>Player and Money<a class="hash-link" href="#player-and-money" title="Direct link to heading">#</a></h2><p>Trading has a Player which has the playerId initially given by the game service. Trading is also the only service which saves the money of the players so Player has also an attribute Money which is a numeric value.</p><p>(<a href="https://github.com/The-Microservice-Dungeon/trading/blob/main/src/main/java/dungeon/trading/player/PlayerRestController.java" target="_blank" rel="noopener noreferrer">https://github.com/The-Microservice-Dungeon/trading/blob/main/src/main/java/dungeon/trading/player/PlayerRestController.java</a>)</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="spawns-and-spacestations"></a>Spawns and Spacestations<a class="hash-link" href="#spawns-and-spacestations" title="Direct link to heading">#</a></h2><p>Even if the trading service is not the owner of spawns and spacestations, their positions of the planets that are a spawn and a spacestation are still needed to match the robot position with the positions of the spacestations/spawns in case of a request to the trading service. It is proposed, that trading has a Positions entity which holds the position of every spawn and spacestation. The data initially comes from the map service which has to emit them to the trading service.</p><p>(<a href="https://github.com/The-Microservice-Dungeon/trading/blob/main/src/main/java/dungeon/trading/station/StationService.java" target="_blank" rel="noopener noreferrer">https://github.com/The-Microservice-Dungeon/trading/blob/main/src/main/java/dungeon/trading/station/StationService.java</a>)</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="tradeables-itemsupgradesregeneration"></a>Tradeables (Items/Upgrades/Regeneration)<a class="hash-link" href="#tradeables-itemsupgradesregeneration" title="Direct link to heading">#</a></h2><p>Tradeables are Item, Upgrade or Regeneration. They have an ID, Name, Description, Price, Type and OriginalPrice. Name and Description are needed to make it readble by humans if a players asks the trading service for a list of all items and their prices. All Item have an adjustable price which will be changed be the economy algorithm of the trading service, based on multiple factors such as demand, current round, etc..
Resources</p><p>Resources can be sold via the trading service. A Resource has ID, Price, Type and OriginalPrice.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="econonomy"></a>Econonomy<a class="hash-link" href="#econonomy" title="Direct link to heading">#</a></h2><p>Economy has an trades history which tracks the trades done by the players/robots and the round numbers to later calculate the prices from.</p><p>(<a href="https://github.com/The-Microservice-Dungeon/trading/tree/main/src/main/java/dungeon/trading/economy" target="_blank" rel="noopener noreferrer">https://github.com/The-Microservice-Dungeon/trading/tree/main/src/main/java/dungeon/trading/economy</a>)</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="examples"></a>Examples<a class="hash-link" href="#examples" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="bank-created"></a>bank-created<a class="hash-link" href="#bank-created" title="Direct link to heading">#</a></h3><p>{ &quot;playerId&quot;: &quot;35184259-d156-4290-94ed-3a4b4f2c36f8&quot;, &quot;money&quot;: 1000 }</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="current-item-prices"></a>current-item-prices<a class="hash-link" href="#current-item-prices" title="Direct link to heading">#</a></h3><p>[ { &quot;name&quot;: &quot;ROCKET&quot;, &quot;price&quot;: 100 }, { &quot;name&quot;: &quot;NUKE&quot;, &quot;price&quot;: 200 }, ... ]</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="current-resource-prices"></a>current-resource-prices<a class="hash-link" href="#current-resource-prices" title="Direct link to heading">#</a></h3><p>[ { &quot;name&quot;: &quot;COAL&quot;, &quot;price&quot;: 10 }, { &quot;name&quot;: &quot;IRON&quot;, &quot;price&quot;: 40 }, { &quot;name&quot;: &quot;GOLD&quot;, &quot;price&quot;: 60 }, ]</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="repository"></a>Repository<a class="hash-link" href="#repository" title="Direct link to heading">#</a></h4><p>(<a href="https://github.com/The-Microservice-Dungeon/trading/blob/main/src/main/java/dungeon/trading/item/ItemRestController.java" target="_blank" rel="noopener noreferrer">https://github.com/The-Microservice-Dungeon/trading/blob/main/src/main/java/dungeon/trading/item/ItemRestController.java</a>)</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="trades"></a>Trades<a class="hash-link" href="#trades" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="not-enough-money"></a>Not enough money<a class="hash-link" href="#not-enough-money" title="Direct link to heading">#</a></h3><p>{ &quot;success&quot;: false, &quot;moneyChangedBy&quot;: 0, &quot;message&quot;: &quot;not enough money&quot;, &quot;data&quot;: null }</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="bought-robot"></a>Bought robot<a class="hash-link" href="#bought-robot" title="Direct link to heading">#</a></h3><p>{ &quot;success&quot;: true, &quot;moneyChangedBy&quot;: -500, &quot;message&quot;: &quot;robot bought&quot;, &quot;data&quot;: { &quot;id&quot;: &quot;497f6eca-6276-4993-bfeb-53cbbbba6f08&quot;, &quot;player&quot;: &quot;ae2cfcf0-e870-4360-a41e-3b3bb3312234&quot;, &quot;planet&quot;: &quot;2faf337d-d8d1-40fc-983e-5f130540496b&quot;, &quot;alive&quot;: true, &quot;maxHealth&quot;: 100, &quot;maxEnergy&quot;: 60, &quot;energyRegen&quot;: 8, &quot;attackDamage&quot;: 5, &quot;miningSpeed&quot;: 10, &quot;health&quot;: 75, &quot;energy&quot;: 43, &quot;healthLevel&quot;: 5, &quot;damageLevel&quot;: 5, &quot;miningSpeedLevel&quot;: 5, &quot;miningLevel&quot;: 5, &quot;energyLevel&quot;: 5, &quot;energyRegenLevel&quot;: 5, &quot;storageLevel&quot;: 5, &quot;inventory&quot;: { &quot;maxStorage&quot;: 20, &quot;usedStorage&quot;: 5, &quot;coal&quot;: 3, &quot;iron&quot;: 2, &quot;gem&quot;: 0, &quot;gold&quot;: 0, &quot;platin&quot;: 0 }, &quot;items&quot;: { &quot;rocket&quot;: 0, &quot;wormhole&quot;: 2, &quot;longRangeBombardement&quot;: 0, &quot;selfDestruction&quot;: 1, &quot;repairSwarm&quot;: 0, &quot;nuke&quot;: 3 } } }
Bought item</p><p>{ &quot;success&quot;: true, &quot;moneyChangedBy&quot;: -100, &quot;message&quot;: &quot;item bought&quot;, &quot;data&quot;: { &quot;itemType&quot;: &quot;ROCKET&quot; } }</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="sold-resource"></a>Sold resource<a class="hash-link" href="#sold-resource" title="Direct link to heading">#</a></h3><p>{ &quot;success&quot;: true, &quot;moneyChangedBy&quot;: 1337, &quot;message&quot;: &quot;resources sold&quot;, &quot;data&quot;: { &quot;coal&quot;: 3, &quot;iron&quot;: 2, &quot;gem&quot;: 0, &quot;gold&quot;: 0, &quot;platin&quot;: 0 } }</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/The-Microservice-Dungeon/docs/edit/main/docs/rules/tradingService.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/rules/robot"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Robot Service Technical View</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/rules/game"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Game Service Technical View Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#price-econonmy" class="table-of-contents__link">Price Econonmy</a></li><li><a href="#resources" class="table-of-contents__link">Resources</a><ul><li><a href="#example-1" class="table-of-contents__link">Example 1</a></li><li><a href="#example-2" class="table-of-contents__link">Example 2</a></li></ul></li><li><a href="#items" class="table-of-contents__link">Items</a></li><li><a href="#lifecycle" class="table-of-contents__link">Lifecycle</a></li><li><a href="#trading-places" class="table-of-contents__link">Trading Places</a></li><li><a href="#special-items" class="table-of-contents__link">Special Items</a></li><li><a href="#upgrades" class="table-of-contents__link">Upgrades</a><ul><li><a href="#prices" class="table-of-contents__link">Prices</a></li></ul></li><li><a href="#trading-semantics" class="table-of-contents__link">Trading Semantics</a><ul><li><a href="#commands" class="table-of-contents__link">Commands</a></li></ul></li><li><a href="#special-items-1" class="table-of-contents__link">Special Items</a></li><li><a href="#player-and-money" class="table-of-contents__link">Player and Money</a></li><li><a href="#spawns-and-spacestations" class="table-of-contents__link">Spawns and Spacestations</a></li><li><a href="#tradeables-itemsupgradesregeneration" class="table-of-contents__link">Tradeables (Items/Upgrades/Regeneration)</a></li><li><a href="#econonomy" class="table-of-contents__link">Econonomy</a></li><li><a href="#examples" class="table-of-contents__link">Examples</a><ul><li><a href="#bank-created" class="table-of-contents__link">bank-created</a></li><li><a href="#current-item-prices" class="table-of-contents__link">current-item-prices</a></li><li><a href="#current-resource-prices" class="table-of-contents__link">current-resource-prices</a></li></ul></li><li><a href="#trades" class="table-of-contents__link">Trades</a><ul><li><a href="#not-enough-money" class="table-of-contents__link">Not enough money</a></li><li><a href="#bought-robot" class="table-of-contents__link">Bought robot</a></li><li><a href="#sold-resource" class="table-of-contents__link">Sold resource</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/The-Microservice-Dungeon" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://archi-lab.io/display/public/The+Microservice+Dungeon" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Archi Lab<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Archi Lab. Built with Docusaurus.</div></div></div></footer></div>
<script src="/docs/assets/js/runtime~main.3faae8b0.js"></script>
<script src="/docs/assets/js/main.345ffa81.js"></script>
</body>
</html>