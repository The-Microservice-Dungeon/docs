<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/docs/blog/rss.xml" title="The Microservice Dungeon Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs/blog/atom.xml" title="The Microservice Dungeon Blog Atom Feed"><title data-react-helmet="true">Map Service Technical View | The Microservice Dungeon</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://The-Microservice-Dungeon.github.io/docs/map_entry"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Map Service Technical View | The Microservice Dungeon"><meta data-react-helmet="true" name="description" content="This part is not completly finished."><meta data-react-helmet="true" property="og:description" content="This part is not completly finished."><link data-react-helmet="true" rel="shortcut icon" href="/docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://The-Microservice-Dungeon.github.io/docs/map_entry"><link data-react-helmet="true" rel="alternate" href="https://The-Microservice-Dungeon.github.io/docs/map_entry" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://The-Microservice-Dungeon.github.io/docs/map_entry" hreflang="x-default"><link rel="stylesheet" href="/docs/assets/css/styles.d4a142dc.css">
<link rel="preload" href="/docs/assets/js/runtime~main.22d175ff.js" as="script">
<link rel="preload" href="/docs/assets/js/main.857be036.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><img src="/docs/img/logo.png" alt="Spaceship" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/docs/img/logo.png" alt="Spaceship" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">The Microservice Dungeon</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Project</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/quickstart_entry">Quickstart Guide</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/dungeon">Gameplay/Map</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/game_entry">Game Service</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/trading_entry">Trading Service</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/robot_entry">Robot Service</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/map_entry">Map Service</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/gameLog_entry">GameLog Service</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">Map</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/openapi/map">Map OpenAPI</a></li><li><a class="dropdown__link" href="/docs/asyncapi/map">Map AsyncAPI</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">Robot</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/openapi/robot">Robot OpenAPI</a></li><li><a class="dropdown__link" href="/docs/asyncapi/robot">Robot AsyncAPI</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">Trading</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/openapi/trading">Trading OpenAPI</a></li><li><a class="dropdown__link" href="/docs/asyncapi/trading">Trading AsyncAPI</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">Gamelog</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/openapi/gamelog">Gamelog OpenAPI</a></li><li><a class="dropdown__link" href="/docs/asyncapi/gamelog">Gamelog AsyncAPI</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">Game</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/openapi/game">Game OpenAPI</a></li><li><a class="dropdown__link" href="/docs/asyncapi/game">Game AsyncAPI</a></li></ul></div><a class="navbar__item navbar__link" href="/docs/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/The-Microservice-Dungeon" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/intro">The Microservice Dungeon</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/quickstart_entry">Quickstart Guide Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Quickstart Guide</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/dungeon">Gameworld and Gameplay Guide</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/game_entry">Game Service Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Game Service</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/trading_entry">Trading Service Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Trading Service</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/robot_entry">Robot Service Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Robot Service</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/map_entry">Map Service Technical View</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/gameLog_entry">Gamelog Service Technical View</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Map Service Technical View</h1></header><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>This part is not completly finished.</p><p>Here are the most important REST calls and events that are used by other services. Some events are used by the player. these will be marked as <strong>player relevant events</strong>.</p><p>The complete list is here<a href="/docs/openapi/map">OpenAPI</a> and here<a href="/docs/asyncapi/map">AsyncAPI</a>.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="service-oriented-functions"></a>Service-oriented Functions<a class="hash-link" href="#service-oriented-functions" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="create-gameworld"></a>Create Gameworld<a class="hash-link" href="#create-gameworld" title="Direct link to heading">#</a></h3><p>Create new Gameworld (size is in correlation to player_amount). This REST call is used by the game service when a new game is created.</p><blockquote><p><strong>POST</strong> </p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">http://{defaultHost}/gameworlds</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><blockquote><p><strong>Payload</strong></p></blockquote><p>  {
&quot;gameworld&quot;: {
&quot;player_amount&quot;: 100,
&quot;round_amount&quot;: 1000
}
}</p><p>Gameworld creation <strong>response</strong> is sent via event in the channel: <strong>gameworld-created</strong></p><blockquote><p><strong>Example Event payload</strong></p></blockquote><p>  {
&quot;id&quot;: &quot;497f6eca-6276-4993-bfeb-53cbbbba6f08&quot;,
&quot;spacestation_ids&quot;: [
&quot;497f6eca-6276-4993-bfeb-53cbbbba6f08&quot;
],
&quot;status&quot;: &quot;active&quot;
}</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="create-spacestation"></a>Create Spacestation<a class="hash-link" href="#create-spacestation" title="Direct link to heading">#</a></h3><p>Automaticly another event, that is saved by the trading service, is produced by the map service. In the channel <strong>spacestation-created</strong> every planetId is published, where you can find a spacestation. This information is used by the trading service to double check the trade commands that can be only placed on space stations and the robot service spawns the new bought robots acording to this information only on space stations.</p><blockquote><p><strong>Example Event payload</strong></p></blockquote><p>  {
&quot;planet_id&quot;: &quot;fe9732a9-b905-4934-8835-ed5a93494397&quot;
}</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="get-planet-information"></a>Get Planet Information<a class="hash-link" href="#get-planet-information" title="Direct link to heading">#</a></h3><p>Get a single Planet including planet_type by id including the neighbours. This REST call the robot service is using for the movement action to get the information for the new planet the robot moved to. It also include the neighbours for the <strong>neighbours event</strong> of the robot.</p><blockquote><p><strong>GET</strong></p></blockquote><p>  http://{defaultHost}/planets/{planet_id}</p><blockquote><p><strong>Example Response</strong></p></blockquote><p>  {</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;id&quot;: &quot;497f6eca-6276-4993-bfeb-53cbbbba6f08&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;movement_difficulty&quot;: 0,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;recharge_multiplicator&quot;: 0,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;gameworld_id&quot;: &quot;5bd7c16e-97a9-49f5-974e-307be5fc576d&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;planet_type&quot;: &quot;default&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;neighbours&quot;: </span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>  [</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">  {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;planet_id&quot;: &quot;fe9732a9-b905-4934-8835-ed5a93494397&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;movement_difficulty&quot;: 0,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;direction&quot;: &quot;north&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>  ],
&quot;created_at&quot;: &quot;2019-08-24T14:15:22Z&quot;,
&quot;updated_at&quot;: &quot;2019-08-24T14:15:22Z&quot;,
&quot;resource&quot;:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">  {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;id&quot;: &quot;497f6eca-6276-4993-bfeb-53cbbbba6f08&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;planet_id&quot;: &quot;fe9732a9-b905-4934-8835-ed5a93494397&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;max_amount&quot;: 0,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;current_amount&quot;: 0,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;created_at&quot;: &quot;2019-08-24T14:15:22Z&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;updated_at&quot;: &quot;2019-08-24T14:15:22Z&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;resource_type&quot;: &quot;coal&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>  }</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="minings"></a>Minings<a class="hash-link" href="#minings" title="Direct link to heading">#</a></h3><p>The robot service is using this REST call to translate a mining command into a mining action. the amount requested is calculated by the robot service on the basis of the robots mining upgrade level.</p><blockquote><p><strong>POST</strong></p></blockquote><p>  http://{defaultHost}/planets/{planet_id}/minings</p><blockquote><p><strong>Request Payload</strong></p></blockquote><p>  {
&quot;mining&quot;:
{
&quot;amount_requested&quot;: 1
}
}</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="player-relevant-events"></a>Player Relevant Events<a class="hash-link" href="#player-relevant-events" title="Direct link to heading">#</a></h2><p>The player schould be listening to two events:</p><p>First the result of a mining command to a robot is produced by the map service as anevent in the channel: <strong>resource-mined</strong>. It contains the
mined resource (of a certain resource_type) from a given planet, for one robots (with given transaction IDs which you can link to your commands), the ctual mined amount and how much of that resource left on that planet.</p><blockquote><p><strong>Example Event Payload</strong></p></blockquote><p>  {
&quot;planet_id&quot;: &quot;fe9732a9-b905-4934-8835-ed5a93494397&quot;,
&quot;resource_id&quot;: &quot;4d5215ed-38bb-48ed-879a-fdb9ca58522f&quot;,
&quot;resource_type&quot;: &quot;coal&quot;,
&quot;amount_mined&quot;: 0,
&quot;amount_left&quot;: 0
}</p><p>Secondly the recources are beeing atomaticly generated by the map service on random plantes. These replenish resources (of a certain resource_type) on a given planet is sent via event. There is no information on how much of a resource has been generated. You can find this in the channel: <strong>resource-replenished</strong>.</p><blockquote><p><strong>Example Event Payload</strong></p></blockquote><p>  {
&quot;planet_id&quot;: &quot;fe9732a9-b905-4934-8835-ed5a93494397&quot;,
&quot;resource&quot;: &quot;d008879e-b5d9-47da-af4e-3c8f40b7c9ee&quot;,
&quot;resource_type&quot;: &quot;coal&quot;
}</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/The-Microservice-Dungeon/docs/edit/main/docs/map.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/robot/robotActions"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Robot Actions</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/gameLog_entry"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Gamelog Service Technical View Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#service-oriented-functions" class="table-of-contents__link">Service-oriented Functions</a><ul><li><a href="#create-gameworld" class="table-of-contents__link">Create Gameworld</a></li><li><a href="#create-spacestation" class="table-of-contents__link">Create Spacestation</a></li><li><a href="#get-planet-information" class="table-of-contents__link">Get Planet Information</a></li><li><a href="#minings" class="table-of-contents__link">Minings</a></li></ul></li><li><a href="#player-relevant-events" class="table-of-contents__link">Player Relevant Events</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/The-Microservice-Dungeon" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://archi-lab.io/display/public/The+Microservice+Dungeon" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Archi Lab<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Archi Lab. Built with Docusaurus.</div></div></div></footer></div>
<script src="/docs/assets/js/runtime~main.22d175ff.js"></script>
<script src="/docs/assets/js/main.857be036.js"></script>
</body>
</html>