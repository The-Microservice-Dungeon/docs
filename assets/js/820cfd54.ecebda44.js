"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6211],{3905:function(e,t,o){o.d(t,{Zo:function(){return m},kt:function(){return d}});var n=o(67294);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var c=n.createContext({}),l=function(e){var t=n.useContext(c),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},m=function(e){var t=l(e.components);return n.createElement(c.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var o=e.components,r=e.mdxType,a=e.originalType,c=e.parentName,m=s(e,["components","mdxType","originalType","parentName"]),p=l(o),d=r,u=p["".concat(c,".").concat(d)]||p[d]||h[d]||a;return o?n.createElement(u,i(i({ref:t},m),{},{components:o})):n.createElement(u,i({ref:t},m))}));function d(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=o.length,i=new Array(a);i[0]=p;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var l=2;l<a;l++)i[l]=o[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,o)}p.displayName="MDXCreateElement"},52551:function(e,t,o){o.r(t),o.d(t,{frontMatter:function(){return s},contentTitle:function(){return c},metadata:function(){return l},toc:function(){return m},default:function(){return p}});var n=o(87462),r=o(63366),a=(o(67294),o(3905)),i=["components"],s={sidebar_position:2},c="Robot Actions",l={unversionedId:"robot/robotActions",id:"robot/robotActions",isDocsHomePage:!1,title:"Robot Actions",description:"Commands",source:"@site/docs/robot/robotActions.md",sourceDirName:"robot",slug:"/robot/robotActions",permalink:"/docs/robot/robotActions",editUrl:"https://github.com/The-Microservice-Dungeon/docs/edit/main/docs/robot/robotActions.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Robot Service Technical View",permalink:"/docs/robot/robot"},next:{title:"Map Service Technical View",permalink:"/docs/map_entry"}},m=[{value:"Commands",id:"commands",children:[{value:"Valid command types for robot",id:"valid-command-types-for-robot",children:[]}]},{value:"Actions",id:"actions",children:[{value:"Blocking action",id:"blocking-action",children:[]},{value:"Movement action",id:"movement-action",children:[]},{value:"Item usage action",id:"item-usage-action",children:[]},{value:"Fighting action",id:"fighting-action",children:[]},{value:"Mining action",id:"mining-action",children:[]},{value:"Regeneration action",id:"regeneration-action",children:[]}]},{value:"Links to Robot Command Repository",id:"links-to-robot-command-repository",children:[]}],h={toc:m};function p(e){var t=e.components,o=(0,r.Z)(e,i);return(0,a.kt)("wrapper",(0,n.Z)({},h,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"robot-actions"},"Robot Actions"),(0,a.kt)("h2",{id:"commands"},"Commands"),(0,a.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"Not all action related events are presented here with an actual example, because they work in the same manner.\nFor the mising Events please refer to the ",(0,a.kt)("a",{parentName:"p",href:"/asyncapi/robot"},"ASYNC API")))),(0,a.kt)("p",null,"The path ",(0,a.kt)("strong",{parentName:"p"},"POST")," \u201c/commands\u201d is a endpoint to receive commands which are no specific API calls. These are all commands which the player issues to the game service which then will be forwarded to the robot service together with a transaction id. They are received as a batch consisting of all commands of a phase."),(0,a.kt)("p",null,"For a deep dive refer to ",(0,a.kt)("a",{parentName:"p",href:"/docs/game/commands"},"Commands"),"."),(0,a.kt)("h3",{id:"valid-command-types-for-robot"},"Valid command types for robot"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"block\nmove\nfight\nmine\nregenerate\nuse-item-fighting\nuse-item-movement\n")),(0,a.kt)("h2",{id:"actions"},"Actions"),(0,a.kt)("p",null,"Every action of a robot is done in the corresponding round phase (refer to ",(0,a.kt)("a",{parentName:"p",href:"/docs/game/game"},"game loop"),"). Most of the actions will require energy. If there is not enought energy left in the robot an action will fail."),(0,a.kt)("h3",{id:"blocking-action"},"Blocking action"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"game service: issues the command which was received by the player"),(0,a.kt)("li",{parentName:"ul"},"robot service: processes the command and throws event in the channel ",(0,a.kt)("strong",{parentName:"li"},"planet-blocked")," according to the result.")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},(0,a.kt)("strong",{parentName:"p"},"Event Payload"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'{\n"success": true,\n"message": "Planet successfully blocked/Not enough energy",\n"planetId": "5e7773ed-265a-4e7b-bece-86392407afef",\n"remainingEnergy": 10\n}\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"If another robot tries to move out of a blocked planet, the robot service will notify it that the movement was not possible. The robot service will check before the movement of a robot if it stands on a blocked planet.")),(0,a.kt)("p",null,"No other service needs to know whether a planet is blocked or not so this information is managed within the robot context exclusively."),(0,a.kt)("h3",{id:"movement-action"},"Movement action"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"game service: issues the command which was received by the player"),(0,a.kt)("li",{parentName:"ul"},"robot service: processes the command, issues request to map, checks if two planets are neighbors, processes the results and throws event according to the result"),(0,a.kt)("li",{parentName:"ul"},"map service: provides neighbors of a planet")),(0,a.kt)("p",null,"A successful result of the move has to incluse all planet data of the new position. This info has to be obfuscated so that not every player can just read the most recent planet data of all visited planets. Therefore the planet info has to be obfuscated via the command uuid.\nAfter a successful movement two events are thrown. The first one which indicates the success of the movement. It contains the remaining energy of the robot, the planet data of the target planet and the uuids of all robots located there. The second event is mapped to the command uuid and provides all neighbors for the target planet after a successful move.\nIf a player tries to move a robot which is on a blocked planet, the robot service will just throw an event to report the failure and that round is lost for that specific robot."),(0,a.kt)("h3",{id:"item-usage-action"},"Item usage action"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"game service: issues the command which was received by the player"),(0,a.kt)("li",{parentName:"ul"},"robot service: processes the command, and throws events according to the result"),(0,a.kt)("li",{parentName:"ul"},"special case movement item: robot determines a random planet for which the map service: provides a list of all planets")),(0,a.kt)("p",null,"(",(0,a.kt)("a",{parentName:"p",href:"https://github.com/The-Microservice-Dungeon/robot/tree/main/src/main/kotlin/com/msd/item/domain"},"https://github.com/The-Microservice-Dungeon/robot/tree/main/src/main/kotlin/com/msd/item/domain"),")"),(0,a.kt)("h4",{id:"fighting-item"},"Fighting item"),(0,a.kt)("p",null,"The received item type determines if a robot uuid or a planet uuid is expected. E.g. robot uuid for the targeted rocket and planet uuid for the nuke."),(0,a.kt)("h4",{id:"repair-item"},"Repair item"),(0,a.kt)("p",null,"The received item type determines if a robot uuid or a planet uuid is expected. E.g. robot uuid for a single repair and planet uuid for the repair swarm."),(0,a.kt)("h4",{id:"movement-item-wormhole"},"Movement item (wormhole)"),(0,a.kt)("p",null,"The robot service requests a list of all planets from the map service and chooses a random one. The location of the robot is changes accordingly and a success event is thrown. Additionaly, the two events after a successful movement (refer to Robot movement sequence) are also thrown."),(0,a.kt)("h3",{id:"fighting-action"},"Fighting action"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"game service: issues the command which was received by the player")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"robot service: processes the command and throws event in the channel ",(0,a.kt)("strong",{parentName:"p"},"fighting")," according to the result."))),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},(0,a.kt)("strong",{parentName:"p"},"Event Payload"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'{\n"success": true,\n"message": "Attacking successful/Target not found",\n"attacker": "afcf1d7a-29fc-47b4-8832-265a3473f8d8",\n"defender": "3f6ad423-cc3c-4d3f-89cb-bdf0badfd437",\n"remainingDefenderHealth": 0,\n"remainingEnergy": 10\n}\n')),(0,a.kt)("p",null,"The event which is thrown as a result of the fighting sequence is puplic available information, as long as someone knows the robot uuid he can listen and use the gathered information."),(0,a.kt)("p",null,"Also in the channel ",(0,a.kt)("strong",{parentName:"p"},"resource-distribution")," you can see how much resources your robot gets, if you destroy an enemy robot. Recources are distributed equaly between all robots present at the planet of the destroyed robot at the moment of its death. If there is no place in the inventory, recources are distributed equaly between all robots with empty inventory. If there are more recourses than inventoryspaces, the resources are lost to the cold cosmos."),(0,a.kt)("h3",{id:"mining-action"},"Mining action"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"game service: issues the command which was received by the player"),(0,a.kt)("li",{parentName:"ul"},"robot service: processes the command, issues requests to map, processes the results and throws event according to the result"),(0,a.kt)("li",{parentName:"ul"},"map service: handles the amount of available resources")),(0,a.kt)("p",null,"All mining requests are received as a package from the game service and processed together. To determine if the requests are valid and the corresponding robot has the ability to mine the resource on its location, the robot service first requests the type of the resource from the map service.\nThe robot service then combines all valid requests for one planet and sends a mining request with the total amount per planet to the map service. Map then returns the amount which can be mined (requested value or below) and robot then distributes the received resources fairly between all participating robots for the planet."),(0,a.kt)("h3",{id:"regeneration-action"},"Regeneration action"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"game service: issues the command which was received by the player"),(0,a.kt)("li",{parentName:"ul"},"robot service: processes the command and throws event according to the result")),(0,a.kt)("p",null,"Be carefull not to mix up with the regenerating, you can buy wit a command to the trading service. This action does not require energy to be used."),(0,a.kt)("h2",{id:"links-to-robot-command-repository"},"Links to Robot Command Repository"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"(",(0,a.kt)("a",{parentName:"p",href:"https://github.com/The-Microservice-Dungeon/robot/blob/main/src/main/kotlin/com/msd/command/application/CommandApplicationService.kt"},"https://github.com/The-Microservice-Dungeon/robot/blob/main/src/main/kotlin/com/msd/command/application/CommandApplicationService.kt"),")")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"(",(0,a.kt)("a",{parentName:"p",href:"https://github.com/The-Microservice-Dungeon/robot/blob/main/src/main/kotlin/com/msd/command/application/CommandController.kt"},"https://github.com/The-Microservice-Dungeon/robot/blob/main/src/main/kotlin/com/msd/command/application/CommandController.kt"),")")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"(",(0,a.kt)("a",{parentName:"p",href:"https://github.com/The-Microservice-Dungeon/robot/blob/main/src/main/kotlin/com/msd/robot/application/RobotApplicationService.kt"},"https://github.com/The-Microservice-Dungeon/robot/blob/main/src/main/kotlin/com/msd/robot/application/RobotApplicationService.kt"),")"))))}p.isMDXComponent=!0}}]);