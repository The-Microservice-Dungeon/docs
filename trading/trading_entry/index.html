<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/docs/blog/rss.xml" title="The Microservice Dungeon Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs/blog/atom.xml" title="The Microservice Dungeon Blog Atom Feed"><title data-react-helmet="true">Trading Service Technical View | The Microservice Dungeon</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://The-Microservice-Dungeon.github.io/docs/trading/trading_entry"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Trading Service Technical View | The Microservice Dungeon"><meta data-react-helmet="true" name="description" content="Lifecycle Technical information"><meta data-react-helmet="true" property="og:description" content="Lifecycle Technical information"><link data-react-helmet="true" rel="shortcut icon" href="/docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://The-Microservice-Dungeon.github.io/docs/trading/trading_entry"><link data-react-helmet="true" rel="alternate" href="https://The-Microservice-Dungeon.github.io/docs/trading/trading_entry" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://The-Microservice-Dungeon.github.io/docs/trading/trading_entry" hreflang="x-default"><link rel="stylesheet" href="/docs/assets/css/styles.4822a9b2.css">
<link rel="preload" href="/docs/assets/js/runtime~main.6910fb64.js" as="script">
<link rel="preload" href="/docs/assets/js/main.f7048328.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><div class="announcementBar_3WsW" role="banner"><div class="announcementBarContent_3EUC">‚ö†Ô∏è The project and the documentation have been moved to GitLab. <a href="https://the-microservice-dungeon.gitlab.io/docs/">Click here to visit the new documentation.</a> ‚ö†Ô∏è</div></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><img src="/docs/img/logo.png" alt="Spaceship" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/docs/img/logo.png" alt="Spaceship" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">The Microservice Dungeon</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Project</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/quickstart_entry">Quickstart Guide</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/dungeon">Gameplay/Map</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/game_entry">Game Service</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/trading_entry">Trading Service</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/robot_entry">Robot Service</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/map_entry">Map Service</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/gameLog_entry">GameLog Service</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">Map</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/openapi/map">Map OpenAPI</a></li><li><a class="dropdown__link" href="/docs/asyncapi/map">Map AsyncAPI</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">Robot</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/openapi/robot">Robot OpenAPI</a></li><li><a class="dropdown__link" href="/docs/asyncapi/robot">Robot AsyncAPI</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">Trading</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/openapi/trading">Trading OpenAPI</a></li><li><a class="dropdown__link" href="/docs/asyncapi/trading">Trading AsyncAPI</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">Gamelog</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/openapi/gamelog">Gamelog OpenAPI</a></li><li><a class="dropdown__link" href="/docs/asyncapi/gamelog">Gamelog AsyncAPI</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">Game</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/openapi/game">Game OpenAPI</a></li><li><a class="dropdown__link" href="/docs/asyncapi/game">Game AsyncAPI</a></li></ul></div><a class="navbar__item navbar__link" href="/docs/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/The-Microservice-Dungeon" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">üåû</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/intro">The Microservice Dungeon</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/quickstart_entry">QuickStart Guide Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Quickstart Guide</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/dungeon">Gameworld and Gameplay Guide</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/game_entry">Game Service Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Game Service</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/trading_entry">Trading Service Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Trading Service</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/trading/trading_entry">Trading Service Technical View</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/trading/tradeables">Tradeables (Recources/Items/Upgrades)</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/trading/economy">Economy</a></li></ul></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/robot_entry">Robot Service Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Robot Service</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/map_entry">Map Service Technical View</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/gameLog_entry">GameLog Service Technical View</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Trading Service Technical View</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="lifecycle-technical-information"></a>Lifecycle Technical information<a class="hash-link" href="#lifecycle-technical-information" title="Direct link to heading">#</a></h2><p>The processes of the trading service are always based on a user command. This is sent by the player to the game service and from there to the trading service. The trading Service controls the money-relevant information. The service also checks whether the request was made from a valid position (space station). Then, in the case of robot-relevant trades, a single request is sent to the robot service to check whether it meets all the necessary requirements for the trade. If this is the case, the trading service receives a positive response to its request to the robot service, withdraws the money and throws an event with the transactionId associated with the trade, so that the player knows what happened with the trade. In the event of a transaction failure, an event is also thrown to inform the player of the error.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="player-and-money"></a>Player and Money<a class="hash-link" href="#player-and-money" title="Direct link to heading">#</a></h2><p>Trading saves a <code>Player</code>. The playerId is known, by listening to the Player registered event of the game service:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;playerId&quot;: &quot;5bc9f935-32f1-4d7b-a90c-ff0e6e34125a&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;name&quot;: &quot;string&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Trading is also the only service which saves the money of the registered <code>Player</code> as an attribute Money which is a numeric value.</p><p>(<a href="https://github.com/The-Microservice-Dungeon/trading/blob/main/src/main/java/dungeon/trading/player/PlayerRestController.java" target="_blank" rel="noopener noreferrer">https://github.com/The-Microservice-Dungeon/trading/blob/main/src/main/java/dungeon/trading/player/PlayerRestController.java</a>)</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="spawns-and-spacestations"></a>Spawns and Spacestations<a class="hash-link" href="#spawns-and-spacestations" title="Direct link to heading">#</a></h2><p>Even if the trading service is not the owner of the space stations, their positions on the map are still needed and so saved to match the robot position with the positions of the space stations in case of a request to the trading service. For example, if a robot wants to sell resources, but is not located on space station. The data initially comes from the map service which has to emit them as an event for every space station:</p><p>{
&quot;planet_id&quot;: &quot;fe9732a9-b905-4934-8835-ed5a93494397&quot;
}</p><p>(<a href="https://github.com/The-Microservice-Dungeon/trading/blob/main/src/main/java/dungeon/trading/station/StationService.java" target="_blank" rel="noopener noreferrer">https://github.com/The-Microservice-Dungeon/trading/blob/main/src/main/java/dungeon/trading/station/StationService.java</a>)</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="trading-places"></a>Trading Places<a class="hash-link" href="#trading-places" title="Direct link to heading">#</a></h2><ul><li><p><code>PLAYER</code> can buy <code>SPECIAL ITEM</code> and <code>UPGRADES</code> with a <code>ROBOT</code> at <code>SPACESTATION</code></p></li><li><p><code>PLAYER</code> can buy <code>ROBOTS</code> <strong>EVERYWHERE</strong> which spawns at a random <code>SPACESTATION</code></p></li><li><p><code>RESOURCE</code> can be sold at any <code>SPACESTATION</code></p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="trading-semantics"></a>Trading Semantics<a class="hash-link" href="#trading-semantics" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="commands"></a>Commands<a class="hash-link" href="#commands" title="Direct link to heading">#</a></h3><p>For a deep dive on commands please look here: <a href="/docs/game/commands">Commands</a></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;gameId&quot;: &quot;d290f1ee-6c54-4b01-90e6-d701748f0851&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;playerToken&quot;: &quot;d290f1ee-6c54-4b01-90e6-d701748f0851&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;robotId&quot;: &quot;d290f1ee-6c54-4b01-90e6-d701748f0851&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;commandType&quot;: &quot;blocking&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;commandObject&quot;: </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;commandType&quot;: &quot;blocking&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;planetId&quot;: &quot;d290f1ee-6c54-4b01-90e6-d701748f0851&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;targetId&quot;: &quot;d290f1ee-6c54-4b01-90e6-d701748f0851&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;itemName&quot;: &quot;string&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;itemQuantity&quot;: 5</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>(<a href="https://github.com/The-Microservice-Dungeon/game/blob/main/src/main/kotlin/microservice/dungeon/game/aggregates/command/controller/CommandController.kt" target="_blank" rel="noopener noreferrer">https://github.com/The-Microservice-Dungeon/game/blob/main/src/main/kotlin/microservice/dungeon/game/aggregates/command/controller/CommandController.kt</a>)</li><li>(<a href="https://github.com/The-Microservice-Dungeon/game/blob/main/src/main/kotlin/microservice/dungeon/game/aggregates/command/domain/Command.kt" target="_blank" rel="noopener noreferrer">https://github.com/The-Microservice-Dungeon/game/blob/main/src/main/kotlin/microservice/dungeon/game/aggregates/command/domain/Command.kt</a>)</li><li>(<a href="https://github.com/The-Microservice-Dungeon/game/blob/main/src/main/kotlin/microservice/dungeon/game/aggregates/command/domain/CommandPayload.kt" target="_blank" rel="noopener noreferrer">https://github.com/The-Microservice-Dungeon/game/blob/main/src/main/kotlin/microservice/dungeon/game/aggregates/command/domain/CommandPayload.kt</a>)</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="rest-calls-for-player"></a>Rest calls for player<a class="hash-link" href="#rest-calls-for-player" title="Direct link to heading">#</a></h2><ul><li>For the <code>player</code> there are <strong>no relevant</strong> REST calls to the trading service</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="events-for-player"></a>Events for player<a class="hash-link" href="#events-for-player" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="bank-created"></a>bank-created<a class="hash-link" href="#bank-created" title="Direct link to heading">#</a></h3><p>This event is produced when a player bank account is initialized:</p><p>Channel: <strong>bank-created</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;playerId&quot;: &quot;35184259-d156-4290-94ed-3a4b4f2c36f8&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;money&quot;: 0</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="current-item-prices"></a>current-item-prices<a class="hash-link" href="#current-item-prices" title="Direct link to heading">#</a></h3><p>At the beginning of each round the new item buy-prices are announced</p><p>Channel: <strong>current-item-prices</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">[</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;name&quot;: &quot;string&quot;, &lt;- Item name</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;price&quot;: 0</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="current-resource-prices"></a>current-resource-prices<a class="hash-link" href="#current-resource-prices" title="Direct link to heading">#</a></h3><p>At the beginning of each round the new sell-resources prices are announced</p><p>Channel: <strong>current-resource-prices</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">[</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;name&quot;: &quot;string&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;price&quot;: 0</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="trades"></a>Trades<a class="hash-link" href="#trades" title="Direct link to heading">#</a></h3><p>The event which indicates what happened to the trade. It also contains additional data about the result of the trade in data. For example, if a robot was bought, data contains the new robot object.</p><p>Channel: <strong>trades</strong></p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="headers"></a>Headers<a class="hash-link" href="#headers" title="Direct link to heading">#</a></h4><p>There are four kinds of <code>headers</code>:</p><blockquote><p><strong>buy-error</strong></p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;type&quot;: &quot;buy-error&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;eventId&quot;: &quot;5bc9f935-32f1-4d7b-a90c-ff0e6e34125a&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;version&quot;: 42,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;timestamp&quot;: &quot;2020-01-10T12:00:00Z&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><blockquote><p><strong>buy-robot</strong></p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;type&quot;: &quot;buy-robot&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;eventId&quot;: &quot;5bc9f935-32f1-4d7b-a90c-ff0e6e34125a&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;version&quot;: 42,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;timestamp&quot;: &quot;2020-01-10T12:00:00Z&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><blockquote><p><strong>buy-item</strong></p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;type&quot;: &quot;buy-item&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;eventId&quot;: &quot;5bc9f935-32f1-4d7b-a90c-ff0e6e34125a&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;version&quot;: 42,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;timestamp&quot;: &quot;2020-01-10T12:00:00Z&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><blockquote><p><strong>sell-resource</strong></p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;type&quot;: &quot;sell-resource&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;eventId&quot;: &quot;5bc9f935-32f1-4d7b-a90c-ff0e6e34125a&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;version&quot;: 42,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;timestamp&quot;: &quot;2020-01-10T12:00:00Z&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="payloads"></a>Payloads<a class="hash-link" href="#payloads" title="Direct link to heading">#</a></h4><blockquote><p><strong>failed transaction</strong></p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;success&quot;: false,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;moneyChangedBy&quot;: 0,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;message&quot;: &quot;not enough money&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;data&quot;: null</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><blockquote><p><strong>bought-robot</strong></p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;success&quot;: true,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;moneyChangedBy&quot;: -500,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;message&quot;: &quot;robot bought&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;data&quot;: [</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;id&quot;: &quot;497f6eca-6276-4993-bfeb-53cbbbba6f08&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;player&quot;: &quot;ae2cfcf0-e870-4360-a41e-3b3bb3312234&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;planet&quot;: &quot;2faf337d-d8d1-40fc-983e-5f130540496b&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;alive&quot;: true,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;maxHealth&quot;: 100,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;maxEnergy&quot;: 60,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;energyRegen&quot;: 8,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;attackDamage&quot;: 5,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;miningSpeed&quot;: 10,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;health&quot;: 75,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;energy&quot;: 43,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;healthLevel&quot;: 5,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;damageLevel&quot;: 5,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;miningSpeedLevel&quot;: 5,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;miningLevel&quot;: 5,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;energyLevel&quot;: 5,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;energyRegenLevel&quot;: 5,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;storageLevel&quot;: 5,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;inventory&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;maxStorage&quot;: 20,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;usedStorage&quot;: 5,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;storedCoal&quot;: 3,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;storedIron&quot;: 2,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;storedGem&quot;: 0,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;storedGold&quot;: 0,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;storedPlatin&quot;: 0</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;items&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;rocket&quot;: 0,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;wormhole&quot;: 2,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;longRangeBombardement&quot;: 0,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;selfDestruction&quot;: 1,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;repairSwarm&quot;: 0,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;nuke&quot;: 3</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><blockquote><p><strong>bought item</strong></p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;success&quot;: true,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;moneyChangedBy&quot;: -100,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;message&quot;: &quot;item bought&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;data&quot;: null</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><blockquote><p><strong>sold resources</strong></p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;success&quot;: true,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;moneyChangedBy&quot;: 1337,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;message&quot;: &quot;resources sold&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;data&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;coal&quot;: 3,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;iron&quot;: 2,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;gem&quot;: 0,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;gold&quot;: 0,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;platin&quot;: 0</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="rest-for-other-services"></a>Rest for other services<a class="hash-link" href="#rest-for-other-services" title="Direct link to heading">#</a></h2><p>The trading service is receiving the <code>commands</code> from the game service via REST call.</p><blockquote><p><strong>POST</strong></p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">    http://{defaultHost}/commands</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><blockquote><p><strong>example payload</strong></p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">[</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;transactionId&quot;: &quot;transactionId&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;playerId&quot;: &quot;playerId&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;payload&quot;: </span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;commandType&quot;: &quot;buy&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;amount&quot;: &quot;5&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;itemName&quot;: &quot;ROBOT&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The gameLog service is using a get command to receive the current balances of the <code>players</code> bank accounts.</p><p>For the current round:</p><blockquote><p><strong>GET</strong></p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">    http://{defaultHost}/balances</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><blockquote><p><strong>example payload</strong></p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">[</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;playerId&quot;: &quot;35184259-d156-4290-94ed-3a4b4f2c36f8&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;balance&quot;: 30002</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Or for a specific round</p><blockquote><p><strong>GET</strong></p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">    http://{defaultHost}/balances/{round-number}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><blockquote><p><strong>example payload</strong></p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">[</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;round&quot;: 0,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;playerId&quot;: &quot;35184259-d156-4290-94ed-3a4b4f2c36f8&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;balance&quot;: 30002</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/The-Microservice-Dungeon/docs/edit/main/docs/trading/tradingService.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/trading_entry"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ Trading Service Overview</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/trading/tradeables"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Tradeables (Recources/Items/Upgrades) ¬ª</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#lifecycle-technical-information" class="table-of-contents__link">Lifecycle Technical information</a></li><li><a href="#player-and-money" class="table-of-contents__link">Player and Money</a></li><li><a href="#spawns-and-spacestations" class="table-of-contents__link">Spawns and Spacestations</a></li><li><a href="#trading-places" class="table-of-contents__link">Trading Places</a></li><li><a href="#trading-semantics" class="table-of-contents__link">Trading Semantics</a><ul><li><a href="#commands" class="table-of-contents__link">Commands</a></li></ul></li><li><a href="#rest-calls-for-player" class="table-of-contents__link">Rest calls for player</a></li><li><a href="#events-for-player" class="table-of-contents__link">Events for player</a><ul><li><a href="#bank-created" class="table-of-contents__link">bank-created</a></li><li><a href="#current-item-prices" class="table-of-contents__link">current-item-prices</a></li><li><a href="#current-resource-prices" class="table-of-contents__link">current-resource-prices</a></li><li><a href="#trades" class="table-of-contents__link">Trades</a></li></ul></li><li><a href="#rest-for-other-services" class="table-of-contents__link">Rest for other services</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/The-Microservice-Dungeon" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://archi-lab.io/display/public/The+Microservice+Dungeon" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Archi Lab<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2022 Archi Lab. Built with Docusaurus.</div></div></div></footer></div>
<script src="/docs/assets/js/runtime~main.6910fb64.js"></script>
<script src="/docs/assets/js/main.f7048328.js"></script>
</body>
</html>