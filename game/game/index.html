<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/docs/blog/rss.xml" title="The Microservice Dungeon Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs/blog/atom.xml" title="The Microservice Dungeon Blog Atom Feed"><title data-react-helmet="true">Game Loop | The Microservice Dungeon</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://The-Microservice-Dungeon.github.io/docs/game/game"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Game Loop | The Microservice Dungeon"><meta data-react-helmet="true" name="description" content="Items are handled separately, to make it easier for the other services."><meta data-react-helmet="true" property="og:description" content="Items are handled separately, to make it easier for the other services."><link data-react-helmet="true" rel="shortcut icon" href="/docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://The-Microservice-Dungeon.github.io/docs/game/game"><link data-react-helmet="true" rel="alternate" href="https://The-Microservice-Dungeon.github.io/docs/game/game" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://The-Microservice-Dungeon.github.io/docs/game/game" hreflang="x-default"><link rel="stylesheet" href="/docs/assets/css/styles.d4a142dc.css">
<link rel="preload" href="/docs/assets/js/runtime~main.199f0f52.js" as="script">
<link rel="preload" href="/docs/assets/js/main.bf0272f1.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><img src="/docs/img/logo.png" alt="Spaceship" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/docs/img/logo.png" alt="Spaceship" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">The Microservice Dungeon</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Project</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/quickstart_entry">Quickstart Guide</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/dungeon">Gameplay/Map</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/game_entry">Game Service</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/trading_entry">Trading Service</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/robot_entry">Robot Service</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/map_entry">Map Service</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/gameLog_entry">GameLog Service</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">Map</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/openapi/map">Map OpenAPI</a></li><li><a class="dropdown__link" href="/docs/asyncapi/map">Map AsyncAPI</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">Robot</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/openapi/robot">Robot OpenAPI</a></li><li><a class="dropdown__link" href="/docs/asyncapi/robot">Robot AsyncAPI</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">Trading</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/openapi/trading">Trading OpenAPI</a></li><li><a class="dropdown__link" href="/docs/asyncapi/trading">Trading AsyncAPI</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">Gamelog</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/openapi/gamelog">Gamelog OpenAPI</a></li><li><a class="dropdown__link" href="/docs/asyncapi/gamelog">Gamelog AsyncAPI</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">Game</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/openapi/game">Game OpenAPI</a></li><li><a class="dropdown__link" href="/docs/asyncapi/game">Game AsyncAPI</a></li></ul></div><a class="navbar__item navbar__link" href="/docs/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/The-Microservice-Dungeon" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/intro">The Microservice Dungeon</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/quickstart_entry">QuickStart Guide Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Quickstart Guide</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/dungeon">Gameworld and Gameplay Guide</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/game_entry">Game Service Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Game Service</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/game/game">Game Loop</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/game/commands">Commands</a></li></ul></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/trading_entry">Trading Service Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Trading Service</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/robot_entry">Robot Service Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Robot Service</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/map_entry">Map Service Technical View</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/gameLog_entry">GameLog Service Technical View</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Game Loop</h1></header><p>Items are handled separately, to make it easier for the other services.
The Item use is always before the normal corresponding action.
The current phases of the execution part of a round are these(for more information look in the technical views of <a href="/docs/robot_entry">robot</a> and <a href="/docs/trading/trading_entry">trading</a>):</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">1. Blocking </span></span><span class="token-line" style="color:#393A34"><span class="token plain">2. Trading</span></span><span class="token-line" style="color:#393A34"><span class="token plain">3. Moving (with an item)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">4. Moving (without an item)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">5. Repairing</span></span><span class="token-line" style="color:#393A34"><span class="token plain">6. Battleing (with an item)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">7. Battleing(without an item)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">8. Mining</span></span><span class="token-line" style="color:#393A34"><span class="token plain">9. Regenerating</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="events"></a>Events<a class="hash-link" href="#events" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="before-a-game"></a>Before a game<a class="hash-link" href="#before-a-game" title="Direct link to heading">#</a></h3><p>Before the start of a game there are these three game service related events.</p><ul><li><p>Game Created</p></li><li><p>Player &quot;name&quot; joined the game. (optional, if no player joins then this event is not produced)</p></li><li><p><em>Excursus:</em> The game world is created through a REST call to the <a href="/docs/map_entry">map service</a>. The game world is automatically sized to the created game maximal player and round amount.</p></li></ul><blockquote><p><strong>POST</strong></p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">http://{defaultHost}/gameworlds</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><blockquote><p><strong>example request payload</strong></p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;gameworld&quot;: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;player_amount&quot;: 100,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;round_amount&quot;: 1000</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>The map service is producing an event for the created game world in the channel <strong>gameworld-created</strong></li></ul><blockquote><p><strong>example event payload</strong></p></blockquote><p>{
&quot;id&quot;: &quot;497f6eca-6276-4993-bfeb-53cbbbba6f08&quot;,
&quot;spacestation_ids&quot;: [
&quot;497f6eca-6276-4993-bfeb-53cbbbba6f08&quot;
],
&quot;status&quot;: &quot;active&quot;
}</p><ul><li>Game started</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="during-a-game"></a>During a game<a class="hash-link" href="#during-a-game" title="Direct link to heading">#</a></h3><p>In the gameplay there is a loop of repeating events:</p><ul><li><p>Round x started (With round x started event automatically begins the command collection phase, where all the players send their commands to the game service)</p></li><li><p>Command Input ended. (after this event the game service is distributing the commands as packages to the other services for every possible command type in the correct phase order. The services execute the commands directly after receiving it. The other services have no awareness about phases. The resolution of all commands can be traced by searching the in the response of the command REST call received <code>transactionId</code>)</p></li><li><p>Round x ended.(After this event a new round will start. Here you can adjust your strategy, after receiving all responses to all actions )</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="game-ending"></a>Game ending<a class="hash-link" href="#game-ending" title="Direct link to heading">#</a></h3><p>The final event is:</p><ul><li>Game ended(with this event a game ends. No commands can be issued anymore. GameLog service should provide a scoreboard and trophies. When a new game starts, you have to join it again to play.)</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="cheat-sheet"></a>Cheat Sheet<a class="hash-link" href="#cheat-sheet" title="Direct link to heading">#</a></h2><p><img alt="Game Timeline" src="/docs/assets/images/gameTimeline-2119ca5d718e567ad3d91e0936295722.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="repository-link-game"></a>Repository Link Game<a class="hash-link" href="#repository-link-game" title="Direct link to heading">#</a></h2><p><a href="https://github.com/The-Microservice-Dungeon/game/tree/main/src/main/kotlin/microservice/dungeon/game/aggregates" target="_blank" rel="noopener noreferrer">Repository Link Game</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/The-Microservice-Dungeon/docs/edit/main/docs/game/game.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/game_entry"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Game Service Overview</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/game/commands"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Commands Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#events" class="table-of-contents__link">Events</a><ul><li><a href="#before-a-game" class="table-of-contents__link">Before a game</a></li><li><a href="#during-a-game" class="table-of-contents__link">During a game</a></li><li><a href="#game-ending" class="table-of-contents__link">Game ending</a></li></ul></li><li><a href="#cheat-sheet" class="table-of-contents__link">Cheat Sheet</a></li><li><a href="#repository-link-game" class="table-of-contents__link">Repository Link Game</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/The-Microservice-Dungeon" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://archi-lab.io/display/public/The+Microservice+Dungeon" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Archi Lab<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Archi Lab. Built with Docusaurus.</div></div></div></footer></div>
<script src="/docs/assets/js/runtime~main.199f0f52.js"></script>
<script src="/docs/assets/js/main.bf0272f1.js"></script>
</body>
</html>